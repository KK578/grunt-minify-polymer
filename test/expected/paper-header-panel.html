<link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-flex-layout/iron-flex-layout.html"><dom-module id="paper-header-panel"><style>:host{@apply(--layout);@apply(--layout-vertical);display:block;position:relative;height:100%;z-index:0;}#mainContainer{@apply(--layout-flex);position:relative;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;flex-basis:0.0001px;}:host([mode=scroll]) #mainContainer{@apply(--paper-header-panel-scroll-container);overflow:visible;}:host([mode=scroll]){overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;}:host([mode=cover]) #mainContainer{@apply(--paper-header-panel-cover-container);position:absolute;top:0;right:0;bottom:0;left:0;}:host([mode=standard]) #mainContainer{@apply(--paper-header-panel-standard-container);}:host([mode=waterfall]) #mainContainer{@apply(--paper-header-panel-waterfall-container);}:host([mode=waterfall-tall]) #mainContainer{@apply(--paper-header-panel-waterfall-tall-container);}:host ::content paper-toolbar,:host ::content .paper-header{position:relative;overflow:visible !important;}:host ::content paper-toolbar:after,:host ::content .paper-header:after{@apply(--paper-header-panel-shadow);-webkit-transition:opacity 0.5s,-webkit-transform 0.5s;transition:opacity 0.5s,transform 0.5s;opacity:0;content:"";width:100%;position:absolute;left:0px;right:0px;z-index:1;-webkit-transform:scale3d(1,0,1);-webkit-transform-origin:0% 0%;transform:scale3d(1,0,1);transform-origin:0% 0%;}:host ::content paper-toolbar.has-shadow:after,:host ::content .paper-header.has-shadow:after{opacity:1;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1);}</style><template><content id="headerContent" select="paper-toolbar, .paper-header"></content><div id="mainContainer" class$="[[_computeMainContainerClass(mode)]]"><content id="mainContent" select="*"></content></div></template></dom-module><style is="custom-style">:root{--paper-header-panel-shadow:{height:6px;bottom:-6px;box-shadow:inset 0px 5px 6px -3px rgba(0,0,0,0.4);};}</style><script>!function(){"use strict";var SHADOW_WHEN_SCROLLING=1,SHADOW_ALWAYS=2,MODE_CONFIGS={outerScroll:{scroll:!0},shadowMode:{standard:SHADOW_ALWAYS,waterfall:SHADOW_WHEN_SCROLLING,"waterfall-tall":SHADOW_WHEN_SCROLLING},tallMode:{"waterfall-tall":!0}};Polymer({is:"paper-header-panel",properties:{mode:{type:String,value:"standard",observer:"_modeChanged",reflectToAttribute:!0},shadow:{type:Boolean,value:!1},tallClass:{type:String,value:"tall"},atTop:{type:Boolean,value:!0,readOnly:!0}},observers:["_computeDropShadowHidden(atTop, mode, shadow)"],ready:function(){this.scrollHandler=this._scroll.bind(this),this._addListener(),this._keepScrollingState()},detached:function(){this._removeListener()},get header(){return Polymer.dom(this.$.headerContent).getDistributedNodes()[0]},get scroller(){return this._getScrollerForMode(this.mode)},get visibleShadow(){return this.header.classList.contains("has-shadow")},_computeDropShadowHidden:function(atTop,mode,shadow){var shadowMode=MODE_CONFIGS.shadowMode[mode];this.shadow?this.toggleClass("has-shadow",!0,this.header):shadowMode===SHADOW_ALWAYS?this.toggleClass("has-shadow",!0,this.header):shadowMode!==SHADOW_WHEN_SCROLLING||atTop?this.toggleClass("has-shadow",!1,this.header):this.toggleClass("has-shadow",!0,this.header)},_computeMainContainerClass:function(mode){var classes={};return classes.flex="cover"!==mode,Object.keys(classes).filter(function(className){return classes[className]}).join(" ")},_addListener:function(){this.scroller.addEventListener("scroll",this.scrollHandler,!1)},_removeListener:function(){this.scroller.removeEventListener("scroll",this.scrollHandler)},_modeChanged:function(newMode,oldMode){var configs=MODE_CONFIGS,header=this.header,animateDuration=200;header&&(configs.tallMode[oldMode]&&!configs.tallMode[newMode]?(header.classList.remove(this.tallClass),this.async(function(){header.classList.remove("animate")},null,animateDuration)):header.classList.toggle("animate",configs.tallMode[newMode])),this._keepScrollingState()},_keepScrollingState:function(){var main=this.scroller,header=this.header;this._setAtTop(0===main.scrollTop),header&&MODE_CONFIGS.tallMode[this.mode]&&this.toggleClass(this.tallClass,this.atTop||header.classList.contains(this.tallClass)&&main.scrollHeight<this.offsetHeight,header)},_scroll:function(e){this._keepScrollingState(),this.fire("content-scroll",{target:this.scroller},this,!1)},_getScrollerForMode:function(mode){return MODE_CONFIGS.outerScroll[mode]?this:this.$.mainContainer}})}();</script>